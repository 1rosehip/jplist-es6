@!(data)

@function header(){
	<title>Mountains</title>

    <!--<link href="/js/jplist.styles.css" rel="stylesheet" type="text/css" />-->
    <link href="css/mountains.css" rel="stylesheet" type="text/css" />
}

@function body(){

    <main role="main">
        <div class="py-5 bg-light">
            <div class="container">

                <div class="row" data-jplist-group="group1">

                    @{
                        var data = JSON.parse(getData());
                    }

                    @for(var i=0; i<data.length; i++) {
                        @{
                            item = data[i];
                            item.createdDate = new Date(item.created_at);
                        }

                        <div class="col-lg-4 col-sm-6 mb-4" data-jplist-item>
                            <div class="card box-shadow">
                                <div class="mountain-img">
                                    <a href="@(item.links.html)">
                                        <img src="@(item.urls.thumb)" alt="" title="" />
                                    </a>
                                </div>
                                <ul class="list-group list-group-flush">

                                    <li class="list-group-item">
                                        <b class="header production-header">Photo by</b>
                                        <a href="@(item.user.links.html)">@(item.user.name)</a> on Unsplash
                                    </li>

                                    <li class="list-group-item">
                                        <b class="header production-header">Likes &#9829</b>
                                        <span class="production">
                                            <span class="start">@(item.likes)</span>
                                        </span>
                                    </li>

                                    @if(item.description){
                                    <li class="list-group-item">
                                        @(item.description)
                                    </li>
                                    }

                                </ul>

                                <div class="card-body">
                                    @for(var t=0; t<item.photo_tags.length; t++){
                                        @{tag = item.photo_tags[t]}

                                        @if(t < 10){
                                            @if(t%2 === 0){
                                                <span class="badge badge-info">@(tag.title)</span>
                                            }
                                            else{
                                                <span class="badge badge-secondary">@(tag.title)</span>
                                            }
                                        }
                                    }
                                </div>

                                <div class="card-footer">
                                    <small class="text-muted">Created at <span>@(item.createdDate.toLocaleDateString('en-US', {
                                        //weekday: 'long',
                                        year: 'numeric',
                                        month: 'long',
                                        day: 'numeric'
                                    }))</small>
                                </div>

                            </div>
                        </div>
                    }

                    <!-- no results control -->
                    <div class="col text-center" data-jplist-control="no-results" data-group="group1" data-name="no-results">No Results Found</div>

                </div>

            </div>
        </div>
    </main>

    <script src="/js/jplist.min.js"></script>
    <script>
        jplist.init();
    </script>
}

@render(process.cwd() + '/build/site/layouts/example.html', data, 'Mountains', header, body)

@function getData(){
    @render(process.cwd() + '/build/site/templates/examples/mountains-data.json')
}